# MCP Integration - Summary of Changes

## üìã –ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

–£—Å–ø–µ—à–Ω–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω MCP (Model Context Protocol) —Å–µ—Ä–≤–µ—Ä –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å Todoist –≤ Android –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ç–µ–ø–µ—Ä—å –º–æ–∂–µ—Ç:

- ‚úÖ –°–æ–∑–¥–∞–≤–∞—Ç—å –∑–∞–¥–∞—á–∏ –≤ Todoist —á–µ—Ä–µ–∑ WebSocket
- ‚úÖ –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á
- ‚úÖ –ü–æ–º–µ—á–∞—Ç—å –∑–∞–¥–∞—á–∏ –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ
- ‚úÖ –£–ø—Ä–∞–≤–ª—è—Ç—å –ø—Ä–æ–µ–∫—Ç–∞–º–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã –≤ —Ç–µ–∫—Å—Ç–µ
- ‚úÖ –†–∞–±–æ—Ç–∞—Ç—å –≤ –æ—Ñ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º–µ —Å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º

## üì¶ –ù–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### build.gradle.kts (root)
```gradle
plugins {
    ...
    id("org.jetbrains.kotlin.plugin.serialization") version "1.9.20" apply false
}
```

### app/build.gradle.kts
```gradle
plugins {
    ...
    id("org.jetbrains.kotlin.plugin.serialization")
}

dependencies {
    ...
    // Kotlinx Serialization –¥–ª—è JSON
    implementation("org.jetbrains.kotlinx:kotlinx-serialization-json:1.6.0")

    // WebSocket (—É–∂–µ –≤–∫–ª—é—á–µ–Ω –≤ OkHttp 4.11.0)
    implementation("com.squareup.okhttp3:okhttp:4.11.0")
}
```

## üìÅ –ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã (9 —Ñ–∞–π–ª–æ–≤)

### Data Layer (5 —Ñ–∞–π–ª–æ–≤)

1. **`data/mcp/McpClient.kt`** (430 —Å—Ç—Ä–æ–∫)
   - WebSocket –∫–ª–∏–µ–Ω—Ç –¥–ª—è MCP
   - JSON-RPC 2.0 –ø—Ä–æ—Ç–æ–∫–æ–ª
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π reconnect
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö Todoist –æ–ø–µ—Ä–∞—Ü–∏–π

2. **`data/mcp/McpRepository.kt`** (339 —Å—Ç—Ä–æ–∫)
   - –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –¥–ª—è MCP –æ–ø–µ—Ä–∞—Ü–∏–π
   - –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á –∏ –ø—Ä–æ–µ–∫—Ç–æ–≤
   - –ò—Å—Ç–æ—Ä–∏—è –∫–æ–º–∞–Ω–¥
   - Graceful error handling

3. **`data/mcp/models/McpRequest.kt`** (74 —Å—Ç—Ä–æ–∫–∏)
   - JSON-RPC request –º–æ–¥–µ–ª–∏
   - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –≤—Å–µ—Ö MCP –∫–æ–º–∞–Ω–¥

4. **`data/mcp/models/McpResponse.kt`** (34 —Å—Ç—Ä–æ–∫–∏)
   - JSON-RPC response –º–æ–¥–µ–ª–∏
   - –ö–æ–¥—ã –æ—à–∏–±–æ–∫

5. **`data/mcp/models/TodoistModels.kt`** (110 —Å—Ç—Ä–æ–∫)
   - –ú–æ–¥–µ–ª–∏ –∑–∞–¥–∞—á, –ø—Ä–æ–µ–∫—Ç–æ–≤
   - –°–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
   - –î–µ–π—Å—Ç–≤–∏—è Todoist
   - –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–ø–µ—Ä–∞—Ü–∏–π

### Utils (1 —Ñ–∞–π–ª)

6. **`utils/McpCommandParser.kt`** (340 —Å—Ç—Ä–æ–∫)
   - –ü–∞—Ä—Å–µ—Ä –∫–æ–º–∞–Ω–¥ –∏–∑ —Ç–µ–∫—Å—Ç–∞
   - Regex –ø–∞—Ç—Ç–µ—Ä–Ω—ã –¥–ª—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è
   - –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞—Ç –∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤
   - Confidence scoring

### UI Components (3 —Ñ–∞–π–ª–∞)

7. **`ui/components/TodoistCard.kt`** (168 —Å—Ç—Ä–æ–∫)
   - –ö–∞—Ä—Ç–æ—á–∫–∞ –∑–∞–¥–∞—á–∏ —Å –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
   - –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞
   - –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π (–≤—ã–ø–æ–ª–Ω–∏—Ç—å, —É–¥–∞–ª–∏—Ç—å)
   - Material 3 design

8. **`ui/components/McpStatusIndicator.kt`** (146 —Å—Ç—Ä–æ–∫)
   - –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
   - –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∏–∫–æ–Ω–∫–∞ –¥–ª—è Connecting
   - –ö–Ω–æ–ø–∫–∞ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
   - –ö–æ–º–ø–∞–∫—Ç–Ω–∞—è –≤–µ—Ä—Å–∏—è (badge)

9. **`ui/components/McpActionButton.kt`** (208 —Å—Ç—Ä–æ–∫)
   - –ö–Ω–æ–ø–∫–∏ –±—ã—Å—Ç—Ä—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π
   - –ö–∞—Ä—Ç–æ—á–∫–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π
   - –ü–∞–Ω–µ–ª—å TodoistQuickActions
   - –°–ø–∏—Å–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π

## üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã (5 —Ñ–∞–π–ª–æ–≤)

### 1. `model/Message.kt`
**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
```kotlin
data class Message(
    ...
    // –ù–æ–≤—ã–µ –ø–æ–ª—è:
    val todoistActions: List<ParsedAction>? = null,
    val hasTodoistSuggestion: Boolean = false
)
```

**–ó–∞—á–µ–º:** –•—Ä–∞–Ω–µ–Ω–∏–µ —Ä–∞—Å–ø–∞—Ä—Å–µ–Ω–Ω—ã—Ö Todoist –¥–µ–π—Å—Ç–≤–∏–π –≤ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö

---

### 2. `viewmodel/ChatViewModel.kt`
**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –î–æ–±–∞–≤–ª–µ–Ω `McpRepository` (—Å—Ç—Ä–æ–∫–∏ 24-27)
- –î–æ–±–∞–≤–ª–µ–Ω—ã LiveData –¥–ª—è MCP —Å–æ—Å—Ç–æ—è–Ω–∏—è (—Å—Ç—Ä–æ–∫–∏ 47-49)
- –ù–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã MCP (—Å—Ç—Ä–æ–∫–∏ 261-431):
  - `sendMessageWithMcp()`
  - `executeTodoistAction()`
  - `createTodoistTask()`
  - `listTodoistTasks()`
  - `completeTodoistTask()`
  - `listTodoistProjects()`
  - `isMcpConnected()`
  - `reconnectMcp()`
  - `onCleared()` - –æ—á–∏—Å—Ç–∫–∞ MCP —Ä–µ—Å—É—Ä—Å–æ–≤

**–ó–∞—á–µ–º:** –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ MCP –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏ –∏–∑ UI

---

### 3. `ui/screens/ChatScreen.kt`
**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –î–æ–±–∞–≤–ª–µ–Ω—ã –∏–º–ø–æ—Ä—Ç—ã MCP –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (—Å—Ç—Ä–æ–∫–∏ 20-25)
- –î–æ–±–∞–≤–ª–µ–Ω–æ MCP —Å–æ—Å—Ç–æ—è–Ω–∏–µ (—Å—Ç—Ä–æ–∫–∏ 49-52)
- –î–æ–±–∞–≤–ª–µ–Ω `McpStatusIndicator` (—Å—Ç—Ä–æ–∫–∏ 126-132)
- –î–æ–±–∞–≤–ª–µ–Ω—ã `TodoistQuickActions` (—Å—Ç—Ä–æ–∫–∏ 135-145)

**–ó–∞—á–µ–º:** –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ MCP UI –≤ —á–∞—Ç–µ

---

### 4. `utils/SystemPrompts.kt`
**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
```kotlin
const val DEFAULT_CHAT = """–¢—ã - –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç Claude —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π Todoist.
...
## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Todoist
...
"""
```

**–ó–∞—á–µ–º:** Claude —Ç–µ–ø–µ—Ä—å –∑–Ω–∞–µ—Ç –æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã —Å Todoist

---

### 5. `build.gradle.kts` files
**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- Root: –¥–æ–±–∞–≤–ª–µ–Ω –ø–ª–∞–≥–∏–Ω serialization
- App: –¥–æ–±–∞–≤–ª–µ–Ω –ø–ª–∞–≥–∏–Ω –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

**–ó–∞—á–µ–º:** –ü–æ–¥–¥–µ—Ä–∂–∫–∞ WebSocket –∏ JSON —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ |
|---------|----------|
| –ù–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤ | 9 |
| –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ | 5 |
| –ù–æ–≤—ã—Ö —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞ | ~2500 |
| –ù–æ–≤—ã—Ö –∫–ª–∞—Å—Å–æ–≤ | 15+ |
| UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ | 3 |
| API –º–µ—Ç–æ–¥–æ–≤ | 10+ |

## üéØ –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### 1. WebSocket –ö–ª–∏–µ–Ω—Ç
- –ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ MCP —Å–µ—Ä–≤–µ—Ä—É
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π reconnect –ø—Ä–∏ –ø–æ—Ç–µ—Ä–µ —Å–≤—è–∑–∏
- JSON-RPC 2.0 –ø—Ä–æ—Ç–æ–∫–æ–ª
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ –∫–æ—Ä—É—Ç–∏–Ω—ã

### 2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥
```kotlin
"–°–æ–∑–¥–∞–π –∑–∞–¥–∞—á—É: –ö—É–ø–∏—Ç—å –º–æ–ª–æ–∫–æ"
‚Üí TodoistAction.CreateTask(content="–ö—É–ø–∏—Ç—å –º–æ–ª–æ–∫–æ")

"–ù–∞–ø–æ–º–Ω–∏ –º–Ω–µ –∑–∞–≤—Ç—Ä–∞ –ø–æ–∑–≤–æ–Ω–∏—Ç—å –≤—Ä–∞—á—É"
‚Üí TodoistAction.CreateTask(content="–ø–æ–∑–≤–æ–Ω–∏—Ç—å –≤—Ä–∞—á—É", due="tomorrow")

"–ü–æ–∫–∞–∂–∏ –º–æ–∏ –∑–∞–¥–∞—á–∏"
‚Üí TodoistAction.ListTasks
```

### 3. –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ñ—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º
- –õ–æ–∫–∞–ª—å–Ω—ã–π –∫–µ—à –∑–∞–¥–∞—á –∏ –ø—Ä–æ–µ–∫—Ç–æ–≤
- –†–∞–±–æ—Ç–∞ –±–µ–∑ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- –ò—Å—Ç–æ—Ä–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –∫–æ–º–∞–Ω–¥

### 4. Rich UI
- –ö–∞—Ä—Ç–æ—á–∫–∏ –∑–∞–¥–∞—á —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏
- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å—Ç–∞—Ç—É—Å–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
- Material 3 –¥–∏–∑–∞–π–Ω

### 5. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- Graceful degradation
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π retry
- –ò–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### WebSocket URL
```kotlin
// ChatViewModel.kt:24-27
private val mcpRepository = McpRepository(
    serverUrl = "ws://10.0.2.2:8080/mcp",  // –î–ª—è —ç–º—É–ª—è—Ç–æ—Ä–∞
    enableDebugLogs = true
)
```

### Reconnect delay
```kotlin
// McpClient.kt:32
private val reconnectDelay: Long = 3000L  // 3 —Å–µ–∫—É–Ω–¥—ã
```

### Request timeout
```kotlin
// McpClient.kt:36
private const val REQUEST_TIMEOUT = 30000L  // 30 —Å–µ–∫—É–Ω–¥
```

### Compression threshold
```kotlin
// McpRepository.kt:36
private val compressionThreshold: Int = 10  // –°–∂–∏–º–∞–µ–º –∫–∞–∂–¥—ã–µ 10 —Å–æ–æ–±—â–µ–Ω–∏–π
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
```
‚úÖ "–°–æ–∑–¥–∞–π –∑–∞–¥–∞—á—É: –ö—É–ø–∏—Ç—å –º–æ–ª–æ–∫–æ"
‚úÖ "–ù–∞–ø–æ–º–Ω–∏ –º–Ω–µ –ø–æ–∑–≤–æ–Ω–∏—Ç—å –≤—Ä–∞—á—É –∑–∞–≤—Ç—Ä–∞"
‚úÖ "–ü–æ–∫–∞–∂–∏ –º–æ–∏ –∑–∞–¥–∞—á–∏"
‚úÖ "–ß—Ç–æ —É –º–µ–Ω—è –Ω–∞ —Å–µ–≥–æ–¥–Ω—è?"
‚úÖ "–û—Ç–º–µ—Ç—å –∑–∞–¥–∞—á—É [ID] –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—É—é"
‚úÖ "–ö–∞–∫–∏–µ —É –º–µ–Ω—è –ø—Ä–æ–µ–∫—Ç—ã?"
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å—Ç–∞—Ç—É—Å–∞ (–≤–≤–µ—Ä—Ö—É —ç–∫—Ä–∞–Ω–∞)
3. üü¢ Connected - —Ä–∞–±–æ—Ç–∞–µ—Ç!
4. üî¥ Disconnected - –ø—Ä–æ–≤–µ—Ä—å—Ç–µ MCP —Å–µ—Ä–≤–µ—Ä

### –û—Ç–ª–∞–¥–∫–∞:
```
Android Studio Logcat:
- –§–∏–ª—å—Ç—Ä: McpClient | McpRepository | ChatViewModel
- –£—Ä–æ–≤–µ–Ω—å: Debug
```

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:

1. **`MCP_INTEGRATION_README.md`** - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
   - –û–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
   - API —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫
   - –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
   - Troubleshooting
   - –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

2. **`QUICK_START.md`** - –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
   - –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è
   - –ù–∞—Å—Ç—Ä–æ–π–∫–∞
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
   - FAQ

3. **`INTEGRATION_SUMMARY.md`** (—ç—Ç–æ—Ç —Ñ–∞–π–ª) - –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:

1. **Unit —Ç–µ—Å—Ç—ã**
   ```kotlin
   // McpCommandParserTest.kt
   // McpClientTest.kt
   // McpRepositoryTest.kt
   ```

2. **UI —Ç–µ—Å—Ç—ã**
   ```kotlin
   // TodoistCardTest.kt
   // McpStatusIndicatorTest.kt
   ```

3. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**
   - –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤
   - Secure storage –¥–ª—è credentials
   - Certificate pinning –¥–ª—è WebSocket

4. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**
   - Pagination –¥–ª—è –±–æ–ª—å—à–∏—Ö —Å–ø–∏—Å–∫–æ–≤ –∑–∞–¥–∞—á
   - Background sync
   - Push notifications

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ:

5. **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–∏—á–∏**
   - –ü–æ–∏—Å–∫ –∑–∞–¥–∞—á
   - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –ø—Ä–æ–µ–∫—Ç–∞–º
   - –ü–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è –∑–∞–¥–∞—á–∏
   - –ü–æ–¥–∑–∞–¥–∞—á–∏
   - –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ –∑–∞–¥–∞—á–∞–º

6. **UI —É–ª—É—á—à–µ–Ω–∏—è**
   - Swipe to complete
   - Drag & drop
   - Inline editing
   - Dark mode –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫

## ‚öôÔ∏è –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ:
- Android SDK 24+
- Kotlin 1.9.20+
- Gradle 8.0+
- MCP —Å–µ—Ä–≤–µ—Ä (–ª–æ–∫–∞–ª—å–Ω—ã–π)

### –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
- OkHttp 4.11.0 (WebSocket)
- Kotlinx Serialization 1.6.0
- Jetpack Compose (—É–∂–µ –µ—Å—Ç—å)
- Coroutines (—É–∂–µ –µ—Å—Ç—å)

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:
- ‚ö†Ô∏è WebSocket –±–µ–∑ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è (ws://)
- ‚ö†Ô∏è URL –≤ –∫–æ–¥–µ (–Ω–µ –≤ production)
- ‚úÖ Graceful degradation
- ‚úÖ Error handling

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è production:
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å WSS (WebSocket Secure)
- [ ] –•—Ä–∞–Ω–∏—Ç—å URL –≤ BuildConfig
- [ ] Encrypted SharedPreferences –¥–ª—è —Ç–æ–∫–µ–Ω–æ–≤
- [ ] Certificate pinning
- [ ] –û–±—Ñ—É—Å–∫–∞—Ü–∏—è –∫–æ–¥–∞ (ProGuard/R8)

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:
1. WebSocket —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏
2. –ù–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å –æ–±–ª–∞–∫–æ–º
3. –ö–µ—à —Ö—Ä–∞–Ω–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –ø–∞–º—è—Ç–∏ (–Ω–µ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–π)
4. –û–¥–Ω–æ –∞–∫—Ç–∏–≤–Ω–æ–µ WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ

### –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
1. –ü—Ä–∏ –±—ã—Å—Ç—Ä—ã—Ö –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è—Ö –º–æ–≥—É—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å—Å—è –∑–∞–ø—Ä–æ—Å—ã
2. Large —Å–ø–∏—Å–∫–∏ –∑–∞–¥–∞—á –º–æ–≥—É—Ç –∑–∞–º–µ–¥–ª–∏—Ç—å UI (–Ω—É–∂–µ–Ω pagination)
3. WebSocket –º–æ–∂–µ—Ç –∑–∞–∫—Ä—ã—Ç—å—Å—è –ø—Ä–∏ –º–∏–Ω–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–Ω—É–∂–µ–Ω foreground service)

### –†–µ—à–µ–Ω–∏—è:
1. Debounce –¥–ª—è reconnect
2. LazyColumn —Å pagination
3. Foreground service –¥–ª—è —Ñ–æ–Ω–æ–≤–æ–π —Ä–∞–±–æ—Ç—ã

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

–£—Å–ø–µ—à–Ω–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π MCP –∫–ª–∏–µ–Ω—Ç —Å:
- ‚úÖ –ß–∏—Å—Ç–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π (MVVM)
- ‚úÖ –†–µ–∞–∫—Ç–∏–≤–Ω—ã–º UI (Compose + LiveData)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ–º –∫–æ–º–∞–Ω–¥
- ‚úÖ –ë–æ–≥–∞—Ç—ã–º UI
- ‚úÖ –û—Ç–ª–∞–¥–æ—á–Ω—ã–º–∏ –ª–æ–≥–∞–º–∏
- ‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π
- ‚úÖ Error handling
- ‚úÖ –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º

**–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üöÄ**

---

**–ê–≤—Ç–æ—Ä:** Claude Code
**–î–∞—Ç–∞:** 2025-11-18
**–í–µ—Ä—Å–∏—è:** 1.0.0
**–í—Ä–µ–º—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:** ~2 —á–∞—Å–∞
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ —Ç–æ–∫–µ–Ω–æ–≤:** ~115k –∏–∑ 200k