# –î–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ø–∞–º—è—Ç—å –∞–≥–µ–Ω—Ç–∞ (SQLite)

## –û–ø–∏—Å–∞–Ω–∏–µ

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –¥–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –ø–∞–º—è—Ç–∏ –¥–ª—è Claude Chat —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Room Database (SQLite). –ê–≥–µ–Ω—Ç —Ç–µ–ø–µ—Ä—å —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤—Å—é –∏—Å—Ç–æ—Ä–∏—é –¥–∏–∞–ª–æ–≥–æ–≤, –≤–∫–ª—é—á–∞—è —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏–∏, –∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∏—Ö –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

## –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### 1. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (Room)

**–§–∞–π–ª—ã:**
- `database/ChatDatabase.kt` - –∫–ª–∞—Å—Å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- `database/ConversationEntity.kt` - Entity –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π
- `database/ConversationDao.kt` - DAO –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î

**Entity —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```kotlin
@Entity(tableName = "conversations")
data class ConversationEntity(
    @PrimaryKey(autoGenerate = true)
    val id: Long = 0,
    val role: String,           // "user" –∏–ª–∏ "assistant"
    val content: String,         // –¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
    val timestamp: Long,         // –í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è
    val isSummary: Boolean,      // –§–ª–∞–≥ summary
    val compressedMessagesCount: Int,  // –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–∂–∞—Ç—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
    val savedTokens: Int,        // –°—ç–∫–æ–Ω–æ–º–ª–µ–Ω–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã
    val estimatedTokens: Int,    // –ü—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–∫–µ–Ω–æ–≤
    val sessionId: String        // ID —Å–µ—Å—Å–∏–∏ –¥–ª—è –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —á–∞—Ç–æ–≤
)
```

### 2. –§—É–Ω–∫—Ü–∏–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è

**–í ChatRepository –¥–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã:**

```kotlin
// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –ë–î
suspend fun saveMessageToDatabase(
    role: String,
    content: String,
    isSummary: Boolean = false,
    savedTokens: Int = 0
)

// –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑ –ë–î
suspend fun restoreHistoryFromDatabase()

// –û—á–∏—Å—Ç–∫–∞ –ë–î –¥–ª—è —Å–µ—Å—Å–∏–∏
suspend fun clearDatabase()
```

### 3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ

–°–æ–æ–±—â–µ–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ –ë–î:
- –ü–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ –æ—Ç Claude
- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ summary –ø–æ—Å–ª–µ –∫–æ–º–ø—Ä–µ—Å—Å–∏–∏

### 4. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:
1. –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤—Å–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ –ë–î
2. –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è conversation history
3. –ê–≥–µ–Ω—Ç –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –¥–∏–∞–ª–æ–≥ —Å —É—á–µ—Ç–æ–º –ø—Ä–æ—à–ª–æ–π –∏—Å—Ç–æ—Ä–∏–∏

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–î–æ–±–∞–≤–ª–µ–Ω—ã –≤ `app/build.gradle.kts`:

```kotlin
plugins {
    id("com.google.devtools.ksp") version "1.9.20-1.0.14"
}

dependencies {
    val roomVersion = "2.6.1"
    implementation("androidx.room:room-runtime:$roomVersion")
    implementation("androidx.room:room-ktx:$roomVersion")
    ksp("androidx.room:room-compiler:$roomVersion")
}
```

## –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∏–∞–ª–æ–≥–∞

```
User –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ
  ‚Üì
–°–æ–æ–±—â–µ–Ω–∏–µ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ conversationHistory
  ‚Üì
–°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î (ConversationEntity)
  ‚Üì
–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∫ Claude API
  ‚Üì
–û—Ç–≤–µ—Ç –ø–æ–ª—É—á–µ–Ω –∏ –¥–æ–±–∞–≤–ª–µ–Ω –≤ conversationHistory
  ‚Üì
–û—Ç–≤–µ—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î
```

### 2. –ö–æ–º–ø—Ä–µ—Å—Å–∏—è —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º

```
–î–æ—Å—Ç–∏–≥–Ω—É—Ç –ø–æ—Ä–æ–≥ (10 —Å–æ–æ–±—â–µ–Ω–∏–π)
  ‚Üì
–°–æ–∑–¥–∞–µ—Ç—Å—è summary
  ‚Üì
Summary —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î —Å isSummary=true
  ‚Üì
–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ 10 —Å–æ–æ–±—â–µ–Ω–∏–π —É–¥–∞–ª—è—é—Ç—Å—è –∏–∑ –ø–∞–º—è—Ç–∏
  ‚Üì
Summary –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ conversationHistory
```

### 3. –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ

```
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
  ‚Üì
ChatRepository –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è
  ‚Üì
–í—ã–∑—ã–≤–∞–µ—Ç—Å—è restoreHistoryFromDatabase()
  ‚Üì
–ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ –ë–î
  ‚Üì
–í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è conversationHistory
  ‚Üì
–ê–≥–µ–Ω—Ç –≥–æ—Ç–æ–≤ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –¥–∏–∞–ª–æ–≥
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç 1: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –±–∞–∑–æ–≤–æ–≥–æ –¥–∏–∞–ª–æ–≥–∞

```kotlin
// 1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–æ–æ–±—â–µ–Ω–∏–π
viewModel.sendMessage("–ü—Ä–∏–≤–µ—Ç")
viewModel.sendMessage("–ö–∞–∫ –¥–µ–ª–∞?")

// 2. –ó–∞–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (Force Stop)

// 3. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–Ω–æ–≤–∞

// –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –ò—Å—Ç–æ—Ä–∏—è –¥–∏–∞–ª–æ–≥–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞
```

### –¢–µ—Å—Ç 2: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ—Å–ª–µ –∫–æ–º–ø—Ä–µ—Å—Å–∏–∏

```kotlin
// 1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫—É "üöÄ –¢–µ—Å—Ç –∫–æ–º–ø—Ä–µ—Å—Å–∏–∏"
// 2. –î–æ–∂–¥–∏—Ç–µ—Å—å —Å–æ–∑–¥–∞–Ω–∏—è summary
// 3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –µ—â–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
// 4. –ó–∞–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
// 5. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–Ω–æ–≤–∞

// –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
// - Summary —Å–æ–æ–±—â–µ–Ω–∏–µ –≤–∏–¥–Ω–æ
// - –ù–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤–∏–¥–Ω–æ
// - Claude "–ø–æ–º–Ω–∏—Ç" –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏–∑ summary
```

### –¢–µ—Å—Ç 3: –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–µ—Å—Å–∏–∏

```kotlin
// 1. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ "–°–µ—Å—Å–∏—è 1"
// 2. –û—á–∏—Å—Ç–∏—Ç–µ —á–∞—Ç
// 3. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ "–°–µ—Å—Å–∏—è 2"
// 4. –ó–∞–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
// 5. –û—Ç–∫—Ä–æ–π—Ç–µ —Å–Ω–æ–≤–∞

// –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
// - –í–∏–¥–Ω–∞ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω—è—è —Å–µ—Å—Å–∏—è
// - –°—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –≤—Å–µ –µ—â–µ –≤ –ë–î (–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å UI –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è)
```

## DAO –ú–µ—Ç–æ–¥—ã

```kotlin
interface ConversationDao {
    // –í—Å—Ç–∞–≤–∫–∞
    suspend fun insertMessage(message: ConversationEntity)
    suspend fun insertMessages(messages: List<ConversationEntity>)

    // –ü–æ–ª—É—á–µ–Ω–∏–µ
    suspend fun getMessagesForSession(sessionId: String): List<ConversationEntity>
    suspend fun getLastMessages(sessionId: String, limit: Int): List<ConversationEntity>
    suspend fun getAllSummaries(sessionId: String): List<ConversationEntity>

    // –£–¥–∞–ª–µ–Ω–∏–µ
    suspend fun clearSession(sessionId: String)
    suspend fun clearAll()
    suspend fun deleteOldMessages(sessionId: String, timestamp: Long)

    // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
    suspend fun getMessageCount(sessionId: String): Int
    suspend fun getTotalTokens(sessionId: String): Int?
    suspend fun getTotalSavedTokens(sessionId: String): Int?

    // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏
    suspend fun getAllSessions(): List<String>
}
```

## –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

1. ‚úÖ **–î–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –ø–∞–º—è—Ç—å** - –∞–≥–µ–Ω—Ç "–ø–æ–º–Ω–∏—Ç" –∏—Å—Ç–æ—Ä–∏—é –º–µ–∂–¥—É –∑–∞–ø—É—Å–∫–∞–º–∏
2. ‚úÖ **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏–π** - —Å–∂–∞—Ç–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –Ω–µ —Ç–µ—Ä—è–µ—Ç—Å—è
3. ‚úÖ **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤** - —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–∞—Å—Ö–æ–¥–µ —Ç–æ–∫–µ–Ω–æ–≤
4. ‚úÖ **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–µ—Å—Å–∏–∏** - –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —á–∞—Ç–æ–≤
5. ‚úÖ **–ë—ã—Å—Ç—Ä–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ** - SQLite –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –±—ã—Å—Ç—Ä—ã–π –¥–æ—Å—Ç—É–ø
6. ‚úÖ **–û—Ñ—Ñ–ª–∞–π–Ω –¥–æ—Å—Ç—É–ø** - –∏—Å—Ç–æ—Ä–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ –¥–∞–∂–µ –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞

## –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

### –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ:
1. UI –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–µ–π
2. –ü–æ–∏—Å–∫ –ø–æ –∏—Å—Ç–æ—Ä–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
3. –≠–∫—Å–ø–æ—Ä—Ç –∏—Å—Ç–æ—Ä–∏–∏ –≤ —Ñ–∞–π–ª
4. –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏

### –°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω—ã–µ:
1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
2. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ (Firebase)
3. –ü–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ (FTS)
4. –¢–µ–≥–∏ –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ:
1. –í–µ–∫—Ç–æ—Ä–Ω–∞—è –ë–î –¥–ª—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–æ–∏—Å–∫–∞
2. –ê–Ω–∞–ª–∏–∑ —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Ç–æ–Ω–∞ –¥–∏–∞–ª–æ–≥–æ–≤
3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è —Ç–µ–º
4. ML-–º–æ–¥–µ–ª—å –¥–ª—è –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –≤–∞–∂–Ω–æ—Å—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏–π

## –§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

```
app/src/main/java/com/example/claudechat/
‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îú‚îÄ‚îÄ ChatDatabase.kt           # Room Database
‚îÇ   ‚îú‚îÄ‚îÄ ConversationEntity.kt     # Entity –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π
‚îÇ   ‚îî‚îÄ‚îÄ ConversationDao.kt        # DAO –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
‚îú‚îÄ‚îÄ repository/
‚îÇ   ‚îî‚îÄ‚îÄ ChatRepository.kt         # –û–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
‚îî‚îÄ‚îÄ viewmodel/
    ‚îî‚îÄ‚îÄ ChatViewModel.kt          # –û–±–Ω–æ–≤–ª–µ–Ω (AndroidViewModel)
```

## SQLite –°—Ö–µ–º–∞

```sql
CREATE TABLE conversations (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    role TEXT NOT NULL,
    content TEXT NOT NULL,
    timestamp INTEGER NOT NULL,
    isSummary INTEGER DEFAULT 0,
    compressedMessagesCount INTEGER DEFAULT 0,
    savedTokens INTEGER DEFAULT 0,
    estimatedTokens INTEGER DEFAULT 0,
    sessionId TEXT DEFAULT 'default'
);

CREATE INDEX idx_session ON conversations(sessionId);
CREATE INDEX idx_timestamp ON conversations(timestamp);
CREATE INDEX idx_summary ON conversations(isSummary);
```

## –†–∞–∑–º–µ—Ä –ë–î

–ü—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç:
- 1 —Å–æ–æ–±—â–µ–Ω–∏–µ ‚âà 500 –±–∞–π—Ç
- 100 —Å–æ–æ–±—â–µ–Ω–∏–π ‚âà 50 KB
- 1000 —Å–æ–æ–±—â–µ–Ω–∏–π ‚âà 500 KB
- 10000 —Å–æ–æ–±—â–µ–Ω–∏–π ‚âà 5 MB

–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –æ—Å—Ç–∞–µ—Ç—Å—è –∫–æ–º–ø–∞–∫—Ç–Ω–æ–π –±–ª–∞–≥–æ–¥–∞—Ä—è —Å–∂–∞—Ç–∏—é –∏—Å—Ç–æ—Ä–∏–∏.

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

Room –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç:
- ‚úÖ –ó–∞—â–∏—Ç—É –æ—Ç SQL –∏–Ω—ä–µ–∫—Ü–∏–π
- ‚úÖ –¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∑–∞–ø—Ä–æ—Å–æ–≤ (compile-time)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏
- ‚úÖ –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–æ–Ω–Ω–æ—Å—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–π

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
- –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ sessionId, timestamp, isSummary
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (Coroutines)
- –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ (Flow –¥–ª—è —Ä–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏)
- –ü–∞–∫–µ—Ç–Ω–∞—è –≤—Å—Ç–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –ø–∞–º—è—Ç–∏:
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –≤ SQLite
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å—É–º–º–∞—Ä–∏–∑–∞—Ü–∏–π
- ‚úÖ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å–µ—Å—Å–∏–π
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ç–æ–∫–µ–Ω–æ–≤

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ê–≥–µ–Ω—Ç —Å –¥–æ–ª–≥–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π –ø–∞–º—è—Ç—å—é, –∫–æ—Ç–æ—Ä—ã–π "–ø–æ–º–Ω–∏—Ç" –≤—Å—é –∏—Å—Ç–æ—Ä–∏—é –¥–∏–∞–ª–æ–≥–æ–≤ –º–µ–∂–¥—É –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è!